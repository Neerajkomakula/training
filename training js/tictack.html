<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Shantell+Sans:wght@300&display=swap" rel="stylesheet">

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />

    <style>
      .cell {
        width: 25px;
        height: 90px;
        border: 2px solid rgb(95, 88, 88);
        font-size: xx-large;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <div class="row p-5">
        <div class="col">
          <h1 style="display: flex; justify-content: center; font-family: 'Shantell Sans', cursive;">TIC-TAC-TOE</h1>
          <div class="p-3" style="display: flex; justify-content: center">
            <div class="btn btn-danger" onclick="reset()">RESET</div>
          </div>
          <div class="row">
            <div
              class="col-4 cell row1 col1 diag1"
              style="
                display: flex;
                justify-content: center;
                align-items: center;
              "
            ></div>
            <div
              class="col-4 cell row1 col2"
              style="
                display: flex;
                justify-content: center;
                align-items: center;
              "
            ></div>
            <div
              class="col-4 cell row1 col3 diag2"
              style="
                display: flex;
                justify-content: center;
                align-items: center;
              "
            ></div>
          </div>
          <div class="row">
            <div
              class="col-4 cell row2 col1"
              style="
                display: flex;
                justify-content: center;
                align-items: center;
              "
            ></div>
            <div
              class="col-4 cell row2 col2 diag1 diag2"
              style="
                display: flex;
                justify-content: center;
                align-items: center;
              "
            ></div>
            <div
              class="col-4 cell row2 col3"
              style="
                display: flex;
                justify-content: center;
                align-items: center;
              "
            ></div>
          </div>
          <div class="row">
            <div
              class="col-4 cell row3 col1 diag2"
              style="
                display: flex;
                justify-content: center;
                align-items: center;
              "
            ></div>
            <div
              class="col-4 cell row3 col2"
              style="
                display: flex;
                justify-content: center;
                align-items: center;
              "
            ></div>
            <div
              class="col-4 cell row3 col3 diag1"
              style="
                display: flex;
                justify-content: center;
                align-items: center;
              "
            ></div>
          </div>
        </div>
        <div class="col border border-primary ml-3">
          <div
            class="row p-2"
            style="
              display: flex;
              justify-content: center;
              font-size: larger;
              font-family: 'Times New Roman', Times, serif;
            "
          >
            SCORE BOARD
          </div>
          <div class="row">
            <div class="col">
              <div
                class="row border border-dark"
                style="display: flex; justify-content: center"
              >
                PLAYER-A
              </div>
              <div
                class="row"
                style="display: flex; justify-content: center"
                id="x"
              >
                0
              </div>
            </div>
            <div class="col">
              <div
                class="row border border-dark"
                style="display: flex; justify-content: center"
              >
                PLAYER-B
              </div>
              <div
                class="row"
                style="display: flex; justify-content: center"
                id="o"
              >
                0
              </div>
            </div>
          </div>
          <div
            class="row p-5 m-5"
            style="
              display: flex;
              justify-content: center;
              font-size: larger;
              font-family: 'Times New Roman', Times, serif;
            "
          >
            <button class="btn btn-danger" onclick="reset_score()">RESET-SCOREBOARD</button>
          </div>
        </div>
      </div>
      <div
        class="row"
        id="winner"
        style="display: flex; justify-content: center; color: green"
      ></div>
      <div
        class="row"
        id="reset"
        style="display: flex; justify-content: center; color: rgba(255, 0, 0, 0.438)"
      ></div>
    </div>

    <script>
      var flag = 0;
      var row1 = document.getElementsByClassName("row1");
      var row2 = document.getElementsByClassName("row2");
      var row3 = document.getElementsByClassName("row3");
      var col1 = document.getElementsByClassName("col1");
      var col2 = document.getElementsByClassName("col2");
      var col3 = document.getElementsByClassName("col3");
      var diag1 = document.getElementsByClassName("diag1");
      var diag2 = document.getElementsByClassName("diag2");
      function check(array, p) {
        for (var i = 0; i < array.length; i++) {
          if (array[i].innerText != p) {
            return 0;
          }
        }
        for (var i = 0; i < array.length; i++) {
          array[i].style =
            "display:flex; justify-content: center; align-items: center; background-color: green;";
        }
        console.log("came here");

        if (p == "x") {
          var value = document.getElementById("x").innerText;
          document.getElementById("x").innerText = parseInt(value) + 1;
          document.getElementById(
            "winner"
          ).innerHTML = `<h2>Player-A won the match</h2>`;
        } else {
          var value = document.getElementById("o").innerText;
          document.getElementById("o").innerText = parseInt(value) + 1;
          document.getElementById(
            "winner"
          ).innerHTML = `<h2>Player-B won the match</h2>`;
        }
        document.getElementById("reset").innerHTML =
    `<h3>click on <b style='color:red'>RESET</b> button to start game again</h3>`;
        return 1;
      }
      function reset_2(array) {
        for (var i = 0; i < array.length; i++) {
          array[i].innerText = "";
          array[i].style =
            "display:flex; justify-content: center; align-items: center;";
        }
      }
      function reset() {
        flag = 0;
        document.getElementById("reset").innerText = "";
        document.getElementById("winner").innerText = "";
        reset_2(row1);
        reset_2(row2);
        reset_2(row3);
        reset_2(col1);
        reset_2(col2);
        reset_2(col3);
        reset_2(diag1);
        reset_2(diag2);
      }
      function check_cross(p) {
        let return_value = check(row1, p);

        if (!return_value) {
          let return_value = check(row2, p);

          if (!return_value) {
            let return_value = check(row3, p);

            if (!return_value) {
              let return_value = check(col1, p);

              if (!return_value) {
                let return_value = check(col2, p);

                if (!return_value) {
                  let return_value = check(col3, p);

                  if (!return_value) {
                    let return_value = check(diag1, p);

                    if (!return_value) {
                      let return_value = check(diag2, p);
                      console.log(return_value);
                    }
                  }
                }
              }
            }
          }
        }
      }

      function check_d(array) {
        for (var i = 0; i < array.length; i++) {
          if (array[i].innerText == "") return 0; //field is empty
        }
        return 1; //no empty space
      }
      function check_draw() {
        let return_value = check_d(row1);

        if (return_value) {
          let return_value = check_d(row2);

          if (return_value) {
            let return_value = check_d(row3);

            if (return_value) {
              return 0;
            } else {
              return 1;
            }
          } else {
            return return_value;
          }
        } else {
          return return_value;
        }
      }

      function select(event) {
        if (event.target.innerText == "x" || event.target.innerText == "o") {
          window.alert("you cant update a selected field");
        } else if (flag % 2 == 0) {
          event.target.innerText = "x";
          flag++;
          check_cross("x");
        } else {
          event.target.innerText = "o";
          flag++;
          check_cross("o");
        }
        if (check_draw()) {
          document.getElementById("winner").innerText = "ITS A DRAWWWW!!";
        }
      }

      var list = document.getElementsByClassName("cell");
      for (var i = 0; i < list.length; i++) {
        list[i].addEventListener("click", select);
      }

      function reset_score(){
        document.getElementById('x').innerText = 0 ;
        document.getElementById('o').innerText = 0 ;
        reset();
      }
    </script>

    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
